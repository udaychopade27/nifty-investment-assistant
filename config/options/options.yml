options:
  enabled: true
  symbols:
  - NIFTY
  - BANKNIFTY
  market_data:
    spot_symbols:
    - NIFTY50
    - BANKNIFTY
    option_symbols: []
    option_instrument_keys: []
    futures_instrument_keys: []
    futures_instruments: []
    option_instruments:
    - underlying: NIFTY 50
      strike: ATM
      step: 50
      side: CE
      key: null
    - underlying: NIFTY 50
      strike: ATM
      step: 50
      side: PE
      key: null
    - underlying: NIFTY BANK
      strike: ATM
      step: 100
      side: CE
      key: null
    - underlying: NIFTY BANK
      strike: ATM
      step: 100
      side: PE
      key: null
    subscription_mode: full
    realtime_key_mode: combined
  market:
    timezone: Asia/Kolkata
    open_time: 09:15
    close_time: '15:30'
  strategy:
    timeframe_minutes: 1
    ema_fast: 9
    ema_slow: 21
    vwap_window: 20
    volume_spike_window: 20
    volume_spike_mult: 2.0
    signal:
      sl_pct: 0.006
      target_pct: 0.012
      min_rr: 1.5
      min_confidence: 0.62
      cooldown_minutes: 5
      strike_preference: ATM
      use_atr_sl_tp: true
      require_atr: true
      atr_window: 14
      atr_mult: 1.2
      max_sl_pct: 0.15
      min_risk_per_unit: 1.0
      max_risk_per_unit: 120.0
      target_rr: 1.8
      risk_per_trade: 1000
      min_qty: 1
      max_qty: 300
      ema_slope_window: 5
      min_ema_slope: 0.02
      rsi_window: 14
      macd_fast: 12
      macd_slow: 26
      macd_signal: 9
      boll_window: 20
      boll_std_mult: 2.0
      candle_quality_min: 0.55
      volume_confirm_mult: 1.5
      oi_confirm_required: true
      max_hold_minutes: 20
      trail_enabled: true
      trail_trigger_r: 1.0
      trail_step_r: 1.5
      trail_lock_pct_of_profit: 0.4
      trail_breakeven_buffer_pct: 0.0005
      ml:
        enabled: true
        model_path: data/options_paper_model.json
        samples_path: data/options_paper_samples.jsonl
        learning_rate: 0.04
        min_score: 0.45
        warmup_trades: 20
  risk:
    max_trades_per_day: 3
    max_loss_per_day: 1000
    no_trade_windows:
    - 09:15-09:25
    - 15:00-15:30
    flat_atr_threshold: 0.2
  paper_trading:
    enabled: true
    qty_per_trade: 1
    slippage_pct: 0.0
    mid_vol_slippage_pct: 0.1
    high_vol_slippage_pct: 0.2
    spread_slippage_factor: 0.2
    open_session_extra_slippage_pct: 0.15
    close_session_extra_slippage_pct: 0.15
    fill_probability_base: 0.98
    fill_probability_spread_penalty_factor: 0.03
    partial_fill_min_ratio: 0.6
    partial_fill_max_ratio: 1.0
    costs:
      brokerage_per_order: 20
      stt_rate: 0.0005
      exchange_txn_rate: 0.00053
      sebi_rate: 0.000001
      gst_rate: 0.18
      stamp_duty_rate: 0.00003
  execution:
    mode: paper
    live_ordering_enabled: false
    block_when_market_closed: true
    idempotency_window_seconds: 300
    max_open_positions: 2
    max_open_notional_pct: 0.6
    pretrade_margin_buffer_pct: 0.1
    max_open_positions_per_symbol: 1
    max_group_exposure_positions: 2
    correlation_groups:
    - name: index_options
      symbols:
      - NIFTY 50
      - NIFTY BANK
  data_quality:
    max_spot_tick_age_seconds: 20
    max_option_tick_age_seconds: 20
    max_spot_jump_pct: 2.0
    max_spread_pct_circuit: 1.2
    anomaly_cooldown_seconds: 120
    min_data_quality_score: 0.65
  operations:
    persist_runtime_state: true
    runtime_state_file: data/options_runtime_state.json
    oi_snapshot_file: data/options_oi_snapshots.jsonl
  promotion_gates:
    min_closed_trades: 50
    min_win_rate_pct: 45.0
    max_drawdown_pct: 20.0
  project:
    strict_requirements:
      require_futures_oi_confirmation: false
      vwap_5m_window: 20
      max_spread_pct: 0.6
      min_option_volume: 1
      delta_min_abs: 0.4
      delta_max_abs: 0.55
      delta_reject_below_abs: 0.3
      block_intraday_on_major_event: true
    event_calendar:
      major_event_dates: []
      major_event_windows: []
    confidence:
      min_score: 70
      intraday_window:
      - 09:45
      - '13:30'
      weights:
        vwap_alignment: 25
        atm_oi_behavior: 25
        futures_confirmation: 20
        iv_direction: 15
        time_of_day: 10
        event_risk: 5
      regime_min_score_overrides:
        Trending: 68
        Range: 74
        Volatile: 76
      min_expected_edge_after_costs: 0.15
    capital:
      monthly_capital: 15000
      lock_monthly_capital_after_first_set: true
      auto_carry_forward_unused: true
      risk_per_trade_pct: 0.08
      max_risk_per_trade_pct: 0.1
      daily_max_loss_pct: 0.12
      weekly_max_loss_pct: 0.25
      max_trades_per_day: 2
      options_risk_budget_pct_of_monthly: 0.6
      monthly_capital_overrides:
        2026-02: 12000.0
  session_controls:
    open_buffer_minutes: 15
    close_buffer_minutes: 20
  ml_pipeline:
    feature_version: v2
    mode: shadow
    drift_guard:
      enabled: true
      window_trades: 20
      min_win_rate_pct: 35
      min_avg_pnl: -50
